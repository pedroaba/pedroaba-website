#!/usr/bin/env sh
. "$(dirname "$0")/_/husky.sh"
echo "meu pinto quadrado"

# Passe os parâmetros do hook para o Commitizen
# $1: caminho do arquivo da mensagem
# $2: origem (message, template, merge, squash)
# $3: SHA (se aplicável)
export HUSKY_GIT_PARAMS="$1 $2 $3"

# Evite interferir em commits automáticos (merge/squash) ou quando já foi passada -m
# (Git chama prepare-commit-msg com origem "message" quando usa -m; se quiser pular, descomente)
# [ "$2" = "message" ] && exit 0
# [ "$2" = "merge" ] && exit 0
# [ "$2" = "squash" ] && exit 0

# Só roda o wizard se houver TTY (terminal interativo).
# Em UIs como VS Code Source Control não há TTY; o hook ficará silencioso (não quebra nada).

exec < /dev/tty
pnpm exec cz --hook
exit 0